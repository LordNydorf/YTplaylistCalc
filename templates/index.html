<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Playlist Duration Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">

</head>
<body>
    <div class="dark-mode-toggle">
        <label for="darkModeSwitch">
            <button class="dark-mode-toggle" aria-label="Toggle dark mode"></button>
        </label>
    </div>

    <h1>YouTube Playlist Duration Calculator</h1>
    <form id="playlistForm">
        <input type="text" id="playlistUrl" placeholder="Enter YouTube Playlist URL" required>
        <button type="submit">Get Total Duration</button>
    </form>
    <div id="result"></div>

    <script>
        // Handle form submission
        document.getElementById('playlistForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const playlistUrl = document.getElementById('playlistUrl').value;

            fetch('/get_playlist_duration', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ url: playlistUrl })
            })
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        document.getElementById('result').innerHTML = "<p class='error'>" + data.error + "</p>";
                    } else {
                        document.getElementById('result').innerText = "Total Playlist Duration: " + data.totalDuration;
                    }
                })
                .catch(error => console.error('Error:', error));
        });

// Handle Dark Mode Toggle
const toggleButton = document.querySelector('.dark-mode-toggle');
let isDarkMode = false;

toggleButton.addEventListener('click', function () {
    isDarkMode = !isDarkMode;
    if (isDarkMode) {
        document.documentElement.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
    } else {
        document.documentElement.removeAttribute('data-theme');
        localStorage.setItem('theme', 'light');
    }
});

// Check for saved user preference, if any, on load of the website
document.addEventListener('DOMContentLoaded', (event) => {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
        isDarkMode = true;
        document.documentElement.setAttribute('data-theme', 'dark');
    }
});
    </script>
</body>
</html>
